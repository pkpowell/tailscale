<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tailscale State</title>
<style>
    {{template "statusStyle"}}
</style>

</head>
<body class="">
    <div class="">
    <!-- <div class="container mx-auto py-6 px-8 bg-white rounded-md shadow-2xl" style="width: 90%;"> -->
        <header class="flex bg-gray-100 items-center py-2 mb-8">
            <div style="width: 80%; margin: auto;">
            <svg width="26" height="26" viewBox="0 0 23 23" title="Tailscale" fill="none" xmlns="http://www.w3.org/2000/svg"
                class="flex-shrink-0 mr-4">
                <circle opacity="0.2" cx="3.4" cy="3.25" r="2.7" fill="currentColor"></circle>
                <circle cx="3.4" cy="11.3" r="2.7" fill="currentColor"></circle>
                <circle opacity="0.2" cx="3.4" cy="19.5" r="2.7" fill="currentColor"></circle>
                <circle cx="11.5" cy="11.3" r="2.7" fill="currentColor"></circle>
                <circle cx="11.5" cy="19.5" r="2.7" fill="currentColor"></circle>
                <circle opacity="0.2" cx="11.5" cy="3.25" r="2.7" fill="currentColor"></circle>
                <circle opacity="0.2" cx="19.5" cy="3.25" r="2.7" fill="currentColor"></circle>
                <circle cx="19.5" cy="11.3" r="2.7" fill="currentColor"></circle>
                <circle opacity="0.2" cx="19.5" cy="19.5" r="2.7" fill="currentColor"></circle>
            </svg>

            <div class="flex items-center space-x-2 ">
                {{ with .Profile.LoginName }}
                <div class="text-right truncate leading-4">
                    <h4 class="truncate leading-normal">{{.}}</h4>
                </div>
                {{ end }}
            </div>

            {{ if .IPs }}
            <div
                class="border border-gray-200 bg-gray-0 rounded-lg flex items-center justify-between">
                <div class="flex items-center min-width-0">
                    <svg class="flex-shrink-0 text-gray-600 mr-3 ml-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                        <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                        <line x1="6" y1="6" x2="6.01" y2="6"></line>
                        <line x1="6" y1="18" x2="6.01" y2="18"></line>
                    </svg>
                    <h4 class="font-semibold truncate mr-2">{{.DeviceName}}</h4>
                </div>
                <div class="">
                {{range .IPs}}
                    <div>{{.}}</div>
                {{end}}
                </div>
            </div>
            {{ end }}
        </div>
        </header>


        <div style="width: 80%; margin: auto;">
        <div class="">
            <div class="status keyval">
                <span class="key md:w-1/5">STATUS</span>
                <span class="val md:w-1/3">
                    {{range .Health}}
                        <div>{{.}}</div>
                    {{else}}
                    <div class="green">OK</div>
                    {{end}}
                </span>
            </div>

            <div class="backend keyval">
                <span class="key md:w-1/5">Backend State</span>
                <span class="val md:w-1/3">{{.BackendState}}</span>
            </div>

            <div class="backend keyval">
                <span class="key md:w-1/5">Version</span> 
                <span class="val md:w-1/3">{{.Version}}</span>
            </div>
            
            {{with .CurrentTailnet}}
                <div class="tailnet keyval">
                    <span class="key md:w-1/5">Tailnet Name</span> 
                    <span class="val md:w-1/3">{{.Name}}</span>
                </div>

                <div class="suffix keyval">
                    <span class="key md:w-1/5">DNS Suffix</span> 
                    <span class="val md:w-1/3">{{.MagicDNSSuffix}}</span>
                </div>

                <div class="magic keyval">
                    <span class="key md:w-1/5">Magic DNS Enabled</span> 
                    <span class="val md:w-1/3">{{.MagicDNSEnabled}}</span>
                </div>
            {{end}}
        </div>

        <p>
            <h2>Machines</h3>
            <table class="tb">
                <thead>
                    <tr class="w-full px-0.5 hover:bg-gray-0">
                        <th class="md:w-1/3 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis">machine</th>
                        <th class="hidden md:block md:w-1/4">IP</th>
                        <th class="hidden md:block w-1/4 lg:w-1/5">OS</th>
                        <th class="hidden lg:block md:flex-auto">Last Seen</th>
                        <th class="flex justify-end ml-auto md:ml-0 w-1/6 lg:w-12"></th>
                    </tr>
                </thead>
                <tbody>
                    {{range .Peers}}
                    <tr class="w-full px-0.5 hover:bg-gray-0">
                        <td class="md:w-1/3 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis">
                            <div class="relative">
                                <div class="items-center text-gray-900">
                                    <h3 class="font-semibold hover:text-blue-500">
                                        {{.HostName}}
                                    </h3>
                                </div>
                                <div class="flex items-center text-gray-600 text-sm">
                                    <span>
                                        {{.Owner}}
                                    </span>
                                </div>
                                <div class="flex items-center text-gray-600 text-sm">
                                    <span>
                                        {{.ID}}
                                    </span>
                                </div>
                            </div>
                            
                        </td>
                        <td class="hidden md:block md:w-1/4">
                            <ul>
                            {{range .IPs}}
                            <li class="font-medium pr-6">
                                <div class="flex relative min-w-0">
                                    <div class="truncate">
                                        <span>{{.}}</span>
                                    </div>
                                </div>
                            </li>
                            {{end}}
                            </ul>
                        </td>
                        <td class="hidden md:block w-1/4 lg:w-1/5">{{.OS}}</td>
                        <td class="hidden lg:block md:flex-auto">{{.ActAgo}}</td>
                        <td class="flex justify-end ml-auto md:ml-0 w-1/6 lg:w-12 justify-items-end items-center md:items-start"></td>

                    </tr>
                    {{end}}
                </tbody>
            </table>
        </p>
    </div>
    </div>
</body>